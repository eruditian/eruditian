import{n as e,r as t,t as n}from"./middleware-w-yzbhhR.js";import{a as r,d as i,f as a,i as o,l as s,n as c}from"./index-D9u71Snz.js";var l=a(i()),u=Array(10).fill(null).map((e,t)=>t.toString()),d=e()(n((e,t)=>({values_to_pick_from:[],next_timeout:0,sequence:[],duration:0,reveal:``,reveal_index:0,answer_index:-1,answers:[],phase:`game-over`,init:(n,r=800)=>{console.log(`values_to_pick_from`,n),n||=u;let i=[n[Math.floor(Math.random()*n.length)]];e({values_to_pick_from:n,duration:r,sequence:i,reveal:i[0],reveal_index:0,next_timeout:performance.now()+r,answer_index:0,answers:[],phase:`reveal`}),requestAnimationFrame(t().tick)},onAnswer:n=>{let{values_to_pick_from:r,answer_index:i,sequence:a,duration:o,answers:s}=t();if(n!==a[i]){e({reveal:``,phase:`game-over`,answers:[...s,n]});return}if(i+1===a.length){e({answer_index:0,sequence:[...a,r[Math.floor(Math.random()*r.length)]],phase:`transition-to-reveal`,next_timeout:performance.now()+o,answers:[...s,a[i]]});return}e({answer_index:i+1,answers:[...s,a[i]]})},tick:()=>{let{next_timeout:n,duration:r,phase:i,sequence:a,reveal_index:o}=t();if(i!==`game-over`){if(i===`reveal`||i===`transition-to-input`||i===`transition-to-reveal`){if(n-performance.now()>0){requestAnimationFrame(t().tick);return}if(i===`transition-to-reveal`){e({next_timeout:performance.now()+r,phase:`reveal`,reveal_index:0,reveal:a[0],answers:[]}),requestAnimationFrame(t().tick);return}if(i===`transition-to-input`){e({next_timeout:performance.now()+r,reveal:``,phase:`input`}),requestAnimationFrame(t().tick);return}console.log(`reveal_index`,o),e({next_timeout:performance.now()+r,reveal:a[o+1],reveal_index:o+1,phase:o+2>=a.length?`transition-to-input`:`reveal`})}requestAnimationFrame(t().tick)}}}),{name:`Eruditio Sequence State`})),f=a(s()),p=({value:e,onClick:t,className:n})=>{let[i,a]=(0,l.useState)(!1);return(0,f.jsx)(`div`,{className:r(`border-secondary-foreground/50 flex grow basis-1 items-center justify-center rounded-sm border bg-transparent p-4 text-5xl transition-all duration-200 ease-out`,i&&`border-secondary-foreground/100 scale-105 border-2 bg-cyan-600/50`,n),onTransitionEnd:()=>a(!1),onClick:()=>{t&&(a(!0),t())},onAuxClick:e=>{e.preventDefault(),e.stopPropagation()},onContextMenu:()=>{t&&(a(!0),t())},children:e})},m=({type:e})=>{let n=d(({reveal:e})=>e),i=d(({reveal_index:e})=>e),a=d(({phase:e})=>e),s=d(({answers:e})=>e),c=d(({sequence:e})=>e),u=d(({values_to_pick_from:e})=>e),m=d(({onAnswer:e})=>e),h=d(({init:e})=>e);return(0,l.useEffect)(()=>{h()},[h]),(0,f.jsxs)(`div`,{className:`relative flex h-full flex-col gap-2`,onAuxClick:e=>{e.preventDefault(),e.stopPropagation()},onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},children:[(0,f.jsxs)(`p`,{className:`text-accent-foreground/50 mb-4 pl-2 text-2xl font-bold`,children:[`Sequence `,e]}),(0,f.jsx)(`div`,{className:r(`pointer-events-none flex grow basis-1/2 items-center justify-center opacity-0`,a===`game-over`&&`pointer-events-auto opacity-100`),children:(0,f.jsxs)(`div`,{className:`border-primary/50 flex cursor-pointer flex-col items-center justify-center gap-4 rounded border p-4`,onClick:()=>h(),onAuxClick:e=>{e.preventDefault(),e.stopPropagation()},onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},children:[`Play again`,(0,f.jsx)(o,{variant:`secondary`,size:`icon`,children:(0,f.jsx)(t,{})})]})}),(0,f.jsx)(`div`,{className:`flex grow basis-full justify-center text-8xl`,children:(0,f.jsxs)(`div`,{className:`flex flex-col`,children:[i%2==0&&n&&(0,f.jsx)(`p`,{className:`mb-10 min-h-14 animate-ping [animation-duration:_1400ms]`,children:n}),i%2==1&&n&&(0,f.jsx)(`p`,{className:`mb-10 min-h-14 animate-ping [animation-duration:_1400ms]`,children:n}),a===`game-over`&&(0,f.jsx)(`div`,{className:r(`flex gap-2`,c.length>10&&`text-6xl`),children:c.map((e,t)=>(0,f.jsx)(`p`,{className:`w-20`,children:e},t+`-`+e))}),(0,f.jsx)(`div`,{className:r(`flex min-h-14 gap-2`,c.length>10&&`text-6xl`),children:s.map((e,t)=>(0,f.jsx)(`p`,{className:r(`w-20 text-teal-600`,a===`game-over`&&`last:text-red-700`),children:e},t+`-`+e))})]})}),(0,f.jsx)(`div`,{className:r(`grid grow basis-full cursor-pointer grid-cols-5 gap-4 p-4 pb-10 transition-all duration-300`,a!==`input`&&`cursor-default opacity-40`),children:u.map(e=>(0,f.jsx)(p,{value:e,onClick:a===`input`?()=>m(e):void 0},e))})]})};const h=[`numbers`,`shapes`];var g=e=>h.includes(e)?e:`numbers`;function _(){let{type:e}=c.useParams();return(0,f.jsx)(m,{type:g(e)})}export{_ as component};